<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu - ‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-50">
    <div class="max-w-md mx-auto min-h-screen shadow-lg bg-white p-6">
        <header class="mb-8 border-b pb-4">
            <h1 class="text-3xl font-extrabold text-orange-600">Delicious Pi üçï</h1>
            <p id="table-display" class="text-gray-500 font-medium">‡πÇ‡∏ï‡πä‡∏∞: ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</p>
        </header>

        <div class="space-y-4" id="menu-list">
            <div class="flex justify-between items-center p-4 bg-white border rounded-2xl shadow-sm">
                <div>
                    <h3 class="font-bold text-lg">‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏±‡∏ö</h3>
                    <p class="text-sm text-gray-400">‡πÄ‡∏ú‡πá‡∏î‡∏£‡∏∞‡∏î‡∏±‡∏ö 3</p>
                </div>
                <div class="text-right">
                    <p class="font-bold text-orange-500 mb-2">75.-</p>
                    <button onclick="order('‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏±‡∏ö', 75)" class="bg-orange-500 text-white px-6 py-2 rounded-xl active:scale-95 transition">‡∏™‡∏±‡πà‡∏á‡πÄ‡∏•‡∏¢</button>
                </div>
            </div>
            <div class="flex justify-between items-center p-4 bg-white border rounded-2xl shadow-sm">
                <div>
                    <h3 class="font-bold text-lg">‡∏ä‡∏≤‡πÑ‡∏ó‡∏¢‡πÄ‡∏¢‡πá‡∏ô</h3>
                    <p class="text-sm text-gray-400">‡∏´‡∏ß‡∏≤‡∏ô‡∏°‡∏±‡∏ô‡∏û‡∏≠‡∏î‡∏µ</p>
                </div>
                <div class="text-right">
                    <p class="font-bold text-orange-500 mb-2">45.-</p>
                    <button onclick="order('‡∏ä‡∏≤‡πÑ‡∏ó‡∏¢‡πÄ‡∏¢‡πá‡∏ô', 45)" class="bg-orange-500 text-white px-6 py-2 rounded-xl active:scale-95 transition">‡∏™‡∏±‡πà‡∏á‡πÄ‡∏•‡∏¢</button>
                </div>
            </div>
        </div>

        <div id="toast" class="fixed bottom-10 left-1/2 -translate-x-1/2 hidden bg-green-600 text-white px-6 py-3 rounded-full shadow-2xl">
            ‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÅ‡∏•‡πâ‡∏ß! üöÄ
        </div>
    </div>

    <script>
        // 1. ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏ï‡πä‡∏∞‡∏à‡∏≤‡∏Å URL
        const urlParams = new URLSearchParams(window.location.search);
        const table = urlParams.get('table') || "A1"; // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏•‡∏Ç‡∏à‡∏∞‡πÉ‡∏ä‡πâ A1 ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
        document.getElementById('table-display').innerText = "‡πÇ‡∏ï‡πä‡∏∞: " + table;

        // 2. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÑ‡∏õ n8n
        async function order(menuName, price) {
            //const WEBHOOK_URL = 'https://exceptions-newman-renew-citizen.trycloudflare.com'; // ‡πÄ‡∏ä‡πá‡∏Ñ IP ‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ‡∏ô‡∏∞
            // ‡πÅ‡∏Å‡πâ‡∏à‡∏≤‡∏Å‡πÄ‡∏î‡∏¥‡∏°
            const WEBHOOK_URL = 'https://met-crafts-cad-stunning.trycloudflare.com/webhook/order';
            
            //http://10.0.30.110:5678/webhook/order
            try {
                await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        table: table,
                        menu: menuName,
                        price: price,
                        orderTime: new Date().toLocaleTimeString()
                    })
                });
                
                // ‡πÇ‡∏ä‡∏ß‡πå Notification ‡∏™‡∏ß‡∏¢‡πÜ
                const toast = document.getElementById('toast');
                toast.classList.remove('hidden');
                setTimeout(() => toast.classList.add('hidden'), 2000);
            } catch (err) {
                alert('‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö WiFi ‡∏£‡πâ‡∏≤‡∏ô!');
            }
        }
    </script>
</body>
</html>
